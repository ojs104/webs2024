<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEVEL1</title>

    <link rel="stylesheet" href="assets/css/project.css">


</head>

<body>
    <div id="header">
        <a href="quizproject01.html">
            <h1>Quiz</h1>
        </a>
    </div>
    <!-- //header -->

    <div id="main">
        <div class="quiz__wrap">
            <div class="quiz">
                <div class="quiz__header"><span>ğŸ˜Šìºë¦­í„° ì´ë¦„ì„ ë§ì¶°ë´ğŸ˜Š</span></div>
                <div class="quiz__main">
                    <div class="quiz_img">
                        <img src="" alt="">
                        <div class="footer__desc">ìœ„ ë¬¸ì œëŠ” ì• ë‹ˆë©”ì´ì…˜ ìºë¦­í„°ê°€ ë‚˜ì˜¤ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.</div>
                    </div>
                    <div class="quiz__box">
                        <div class="quiz__question"></div>
                        <div class="quiz__footer">
                            <input type="text" name="text" id="text">
                            <div class="quiz__answer none"></div>
                        </div>
                        <!-- quiz__box -->
                        <div class="box__footer">
                            <button class="quiz__confirm">ì •ë‹µ í™•ì¸</button>
                            <a href="quizproject03.html" class="quiz__Next none">LEVEL2</a>
                            <a href="quizproject01.html" class="quiz__reset none">START</a>
                        <div>ì ìˆ˜: <span id="score">0</span></div>
                    </div>
                        
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- //main -->

    <script>
        const quizData = [
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ë„ë„ë“œë•",
                "imageURL": "assets/project img/level1/img1-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ë¯¸í‚¤ë§ˆìš°ìŠ¤",
                "imageURL": "assets/project img/level1/img4-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ì§€ë‹ˆ",
                "imageURL": "assets/project img/level1/img9-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ì—˜ì‚¬",
                "imageURL": "assets/project img/level1/img10-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ìŠ¤í°ì§€ë°¥",
                "imageURL": "assets/project img/level1/img21-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "í›ˆì´",
                "imageURL": "assets/project img/level1/img22-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ì„¸ì¼ëŸ¬ë¬¸",
                "imageURL": "assets/project img/level1/img23-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ìŠ¤íŒŒì´ë”ë§¨",
                "imageURL": "assets/project img/level1/img28-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "í”¼ì¹´ì¸„",
                "imageURL": "assets/project img/level1//img71-min.png"
            },
            {
                "question": "ë‚´ê°€ ëˆ„êµ¬ê²Œìš”~?",
                "answer": "ë˜ì¹˜",
                "imageURL": "assets/project img/level1//img74-min.png"
            }

        ];       

        let currentQuizIndex = 0; // í˜„ì¬ í€´ì¦ˆ ì¸ë±ìŠ¤
        let score = 0;

        // DOM ìš”ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        const quizHeader = document.querySelector(".quiz__header span");
        const quizImage = document.querySelector(".quiz_img img");
        const quizQuestion = document.querySelector(".quiz__question");
        const quizAnswerInput = document.querySelector("#text");
        const quizConfirmButton = document.querySelector(".quiz__confirm");
        const quizNextButton = document.querySelector(".quiz__Next");
        const quizAnswer = document.querySelector(".quiz__answer")
        const quizReset = document.querySelector(".quiz__reset")
        const quizInput = document.querySelector(".quiz__footer input");
        

        // ì´ˆê¸° í€´ì¦ˆ ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
        displayQuizData();

        // ì •ë‹µ í™•ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
        quizConfirmButton.addEventListener("click", checkAnswer);

        // ë‹¤ìŒ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
        // quizNextButton.addEventListener("click", nextQuestion);

        // ì •ë‹µ ì…ë ¥ í•„ë“œì—ì„œ Enter í‚¤ë¥¼ ëˆŒë €ì„ ë•Œë„ ì •ë‹µ í™•ì¸ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
        quizAnswerInput.addEventListener("keyup", function (event) {
            if (event.key === "Enter") {
                checkAnswer();
            }
        });

        // í€´ì¦ˆ ë°ì´í„°ë¥¼ ëœë¤ìœ¼ë¡œ ì„ìŠµë‹ˆë‹¤.
        function shuffleQuizData() {
            for (let i = quizData.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [quizData[i], quizData[j]] = [quizData[j], quizData[i]];
            }
        }
        // ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í€´ì¦ˆ ë°ì´í„°ë¥¼ ì„ê³  ì²« ë²ˆì§¸ í€´ì¦ˆë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
        function initializeQuiz() {
            shuffleQuizData(); // í€´ì¦ˆ ë°ì´í„°ë¥¼ ì„ìŒ
            currentQuizIndex = 0; // í˜„ì¬ í€´ì¦ˆ ì¸ë±ìŠ¤ ì´ˆê¸°í™”
            displayQuizData(); // ì²« ë²ˆì§¸ í€´ì¦ˆë¥¼ í‘œì‹œ
        }
        initializeQuiz();

        // ì •ë‹µ í™•ì¸ í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
        
        function checkAnswer() {
            const userAnswer = quizAnswerInput.value.trim().toLowerCase(); // ì…ë ¥í•œ ë‹µì„ ì†Œë¬¸ìë¡œ ë³€í™˜
            const correctAnswer = quizData[currentQuizIndex].answer.replace(/\s/g, "").toLowerCase(); // ì •ë‹µì„ ì†Œë¬¸ìë¡œ ë³€í™˜
            const feedbackDiv = document.createElement("div");
            if (userAnswer === correctAnswer) {
                // ì •ë‹µì„ ë§ì·„ì„ ë•Œ
                // alert("ì •ë‹µì…ë‹ˆë‹¤.");
                score = score+10;
                document.getElementById("score").textContent = score;
                feedbackDiv.textContent = "ì •ë‹µì…ë‹ˆë‹¤";
                feedbackDiv.classList.add("feedback2");
                document.querySelector(".quiz__box").appendChild(feedbackDiv);
                setTimeout(function () {
                    feedbackDiv.remove();
                }, 500); // 0.5ì´ˆ í›„ì— ì œê±° ë° ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
            } else {
                // ì˜¤ë‹µì¼ ë•Œ ì—¬ê¸°ì— ì¶”ê°€ ë™ì‘ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                feedbackDiv.textContent = "ë•¡! ì •ë‹µì€ " + quizData[currentQuizIndex].answer + " ì…ë‹ˆë‹¤.";
                feedbackDiv.classList.add("feedback");
                document.querySelector(".quiz__box").appendChild(feedbackDiv);
                setTimeout(function () {
                    feedbackDiv.remove();
                    nextQuestion(); // ì¼ì • ì‹œê°„ í›„ì— ë‹¤ìŒ ë¬¸ì œë¡œ ìë™ìœ¼ë¡œ ë„˜ì–´ê°
                }, 2500); // 2ì´ˆ í›„ì— ì œê±° ë° ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
                return; // ì˜¤ë‹µ ì²˜ë¦¬ í›„ í•¨ìˆ˜ ì¢…ë£Œ
            }
            currentQuizIndex++; // ë‹¤ìŒ í€´ì¦ˆë¡œ ì´ë™
            if (currentQuizIndex < quizData.length) {
                displayQuizData(); // ìƒˆë¡œìš´ í€´ì¦ˆ ë°ì´í„° í‘œì‹œ
            } else {
                // alert("í€´ì¦ˆê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                quizNextButton.classList.remove("none");
                quizConfirmButton.classList.add("none");
            }
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            quizAnswerInput.value = "";
            quizAnswerInput.classList.remove("correct");
            } 
           

        // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
        function nextQuestion() {
            currentQuizIndex++; // ë‹¤ìŒ í€´ì¦ˆë¡œ ì´ë™
            if (currentQuizIndex < quizData.length) {
                displayQuizData(); // ìƒˆë¡œìš´ í€´ì¦ˆ ë°ì´í„° í‘œì‹œ
            } else {
                alert("í€´ì¦ˆê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                if (score >= 50){
                    quizNextButton.classList.remove("none");
                    quizConfirmButton.classList.add("none");
                } else {
                    quizReset.classList.remove("none");
                    quizConfirmButton.classList.add("none");
                }
            }
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            quizAnswerInput.value = "";
        }

        quizReset.addEventListener("click", function () {
            // ì ìˆ˜ ì´ˆê¸°í™”
            score = 0;
            document.getElementById("score").textContent = score;
            // ë¦¬ì…‹ ë²„íŠ¼ì„ ê°ì¶¥ë‹ˆë‹¤.
            quizReset.classList.add("none");
            // ë‹¤ì‹œ í€´ì¦ˆë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
            initializeQuiz();
        });

        // í€´ì¦ˆ ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
        function displayQuizData() {
            const currentQuiz = quizData[currentQuizIndex];
            // quizHeader.textContent = currentQuiz.question;
            quizImage.src = currentQuiz.imageURL;
            quizQuestion.textContent = currentQuiz.question;
        }


    </script>
</body>

</html>